<!DOCTYPE html>
<html class="site">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>{{title}}</title>
    {{#description}}<meta name="description" content="{{description}}">{{/description}}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="{{{assetUrl}}}posties.css">
  </head>
  <body class="site-body">

    {{>header}}

    <div class="site-container">
      {{#site}}
        {{^editMode}}
          {{#parts}}
            <article>
              {{#typeText}}    {{>part/text}}    {{/typeText}}
              {{#typeHeading}} {{>part/heading}} {{/typeHeading}}
              {{#typeImage}}   {{>part/image}}   {{/typeImage}}
              {{#typeVideo}}   {{>part/video}}   {{/typeVideo}}
            </article>
          {{/parts}}
        {{/editMode}}
      {{/site}}
    </div>


    <div class="site-container">
      <div ng-controller="EditorCtrl">
        {{#site}}
          {{#editMode}}
            {{>welcome}}
          {{/editMode}}
        {{/site}}

        <ul id="parts" ng-style="{ 'color': siteOptions.text_color }">
          <li ng-repeat="part in parts" data-id="[[part.id]]" data-rank="[[part.sortrank]]" class="part">
            <ng-include src="part.template"></ng-include>
          </li>
        </ul>

        {{#editMode}}
          {{>partTypes}}
        {{/editMode}}
      </div>

      {{#index}}
        {{>signup}}
      {{/index}}
    </div>

    {{>jsTemplates/partOptions}}
    {{>jsTemplates/partText}}
    {{>jsTemplates/partHeadline}}
    {{>jsTemplates/partImage}}
    {{>jsTemplates/partVideo}}
    {{#editMode}}
      {{>jsTemplates/partImageUploading}}
      {{>jsTemplates/partImageLoading}}
      {{>jsTemplates/partVideoInput}}
    {{/editMode}}

    {{#dump}}
      <pre style="font-size: 12px; line-height: 1.4; color: #111; background: white; padding: 14px;">{{{dump}}}</pre>
    {{/dump}}

    {{>symbols}}

    <!--
    <script>
      var FONTS = [{{#fonts}}'{{{.}}}',{{/fonts}}];
      {{#site}}
      var SITE_DATA = {{{site}}};
      {{/site}}

      // Trigger svg redraw (safari issue)
      document.addEventListener('DOMContentLoaded', function(){
        var elms = document.getElementsByTagName('use');
        Array.prototype.forEach.call(elms, function(el, i){
          var href = el.getAttribute('xlink:href');
          el.setAttribute('xlink:href', href);
        });
      });

      {{#analyticsCode}}
      // Google analytics
      /* (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', '{{{analyticsCode}}}', 'auto');
      ga('require', 'displayfeatures');
      ga('send', 'pageview'); */
      {{/analyticsCode}}
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"></script>
    {{#production}}
    <script src="{{{assetUrl}}}posties.js"></script>
    {{/production}}
    {{^production}}
    <script src="{{{assetUrl}}}libs.js"></script>
    <script src="{{{assetUrl}}}index.js"></script>
    {{/production}}
    {{#editMode}}
    <script src="//api.filepicker.io/v1/filepicker.js"></script>
    <script>filepicker.setKey('{{filePickerKey}}');</script>
    {{/editMode}}
    -->
  </body>
</html>